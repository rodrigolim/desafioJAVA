
CREATE SCHEMA IF NOT EXISTS CADASTRO;

CREATE TABLE IF NOT EXISTS CADASTRO.MARCA (
  MARCA_ID BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY,
  NOME VARCHAR(100) NOT NULL,
  DATA_CRIACAO TIMESTAMP NOT NULL DEFAULT NOW(),
  DATA_ATUALIZACAO TIMESTAMP NOT NULL DEFAULT NOW(),
  CONSTRAINT PK_MARCA PRIMARY KEY (MARCA_ID)
);
COMMENT ON TABLE CADASTRO.MARCA IS 'Tabela responsável por armazenar dados da marca.';
COMMENT ON COLUMN CADASTRO.MARCA.MARCA_ID IS 'Identificador único da tabela.';
COMMENT ON COLUMN CADASTRO.MARCA.NOME IS 'Nome da marca.';
COMMENT ON COLUMN CADASTRO.MARCA.DATA_CRIACAO IS 'Data de criação da marca.';
COMMENT ON COLUMN CADASTRO.MARCA.DATA_ATUALIZACAO IS 'Data de atualização da marca.';

CREATE TABLE IF NOT EXISTS CADASTRO.PROPRIETARIO (
  PROPRIETARIO_ID BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY,
  NOME VARCHAR(100) NOT NULL,
  TIPO VARCHAR(1) NULL,
  CNPJ VARCHAR(50) NOT NULL UNIQUE,
  CPF VARCHAR(50) NOT NULL UNIQUE,
  ENDERECO VARCHAR(50) NULL,
  UF VARCHAR(2) NULL,
  CIDADE VARCHAR(50) NULL,
  PAIS VARCHAR(50) NULL,
  TELEFONE VARCHAR(20) NULL,
  EMAIL VARCHAR(20) NULL,
  DATA_CRIACAO TIMESTAMP NOT NULL DEFAULT NOW(),
  DATA_ATUALIZACAO TIMESTAMP NOT NULL DEFAULT NOW(),
  CONSTRAINT PK_PROPRIETARIO PRIMARY KEY (PROPRIETARIO_ID)
);
COMMENT ON TABLE CADASTRO.PROPRIETARIO IS 'Tabela responsável por armazenar dados do proprietário.';
COMMENT ON COLUMN CADASTRO.PROPRIETARIO.PROPRIETARIO_ID IS 'Identificador único da tabela.';
COMMENT ON COLUMN CADASTRO.PROPRIETARIO.NOME IS 'Nome do responsável.';
COMMENT ON COLUMN CADASTRO.PROPRIETARIO.TIPO IS 'Sobrenome do responsável.';
COMMENT ON COLUMN CADASTRO.PROPRIETARIO.CNPJ IS 'RG do responsável.';
COMMENT ON COLUMN CADASTRO.PROPRIETARIO.CPF IS 'CPF do responsável.';
COMMENT ON COLUMN CADASTRO.PROPRIETARIO.ENDERECO IS 'Endereço de residência do responsável.';
COMMENT ON COLUMN CADASTRO.PROPRIETARIO.UF IS 'Estado (UF) de residência do responsável.';
COMMENT ON COLUMN CADASTRO.PROPRIETARIO.CIDADE IS 'Cidade de residência do responsável.';
COMMENT ON COLUMN CADASTRO.PROPRIETARIO.PAIS IS 'País de residência do responsável.';
COMMENT ON COLUMN CADASTRO.PROPRIETARIO.TELEFONE IS 'Número do Telefone celular do responsável.';
COMMENT ON COLUMN CADASTRO.PROPRIETARIO.EMAIL IS 'Email do responsável.';
COMMENT ON COLUMN CADASTRO.PROPRIETARIO.DATA_CRIACAO IS 'Data de criação do responsável.';
COMMENT ON COLUMN CADASTRO.PROPRIETARIO.DATA_ATUALIZACAO IS 'Data de atualização do responsável.';


CREATE TABLE IF NOT EXISTS CADASTRO.PESSOA (
  PESSOA_ID BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY,
  NOME VARCHAR(50) NOT NULL,
  SOBRENOME VARCHAR(100) NOT NULL,
  RG VARCHAR(50) NOT NULL UNIQUE,
  CPF VARCHAR(50) NOT NULL UNIQUE,
  SEXO VARCHAR(1) NULL,
  DATA_NASCIMENTO DATE NULL,
  ENDERECO VARCHAR(50) NULL,
  UF VARCHAR(50) NULL,
  CIDADE VARCHAR(50) NULL,
  PAIS VARCHAR(50) NULL,
  CELULAR VARCHAR(20) NULL,
  EMAIL VARCHAR(20) NULL,
  DATA_CRIACAO TIMESTAMP NOT NULL DEFAULT NOW(),
  DATA_ATUALIZACAO TIMESTAMP NOT NULL DEFAULT NOW(),
  CONSTRAINT PK_PESSOA PRIMARY KEY (PESSOA_ID)
);
COMMENT ON TABLE CADASTRO.PESSOA IS 'Tabela responsável por armazenar dados de pessoa física.';
COMMENT ON COLUMN CADASTRO.PESSOA.PESSOA_ID IS 'Identificador único da tabela.';
COMMENT ON COLUMN CADASTRO.PESSOA.NOME IS 'Nome da pessoa física.';
COMMENT ON COLUMN CADASTRO.PESSOA.SOBRENOME IS 'Sobrenome da pessoa física.';
COMMENT ON COLUMN CADASTRO.PESSOA.RG IS 'RG da pessoa física.';
COMMENT ON COLUMN CADASTRO.PESSOA.CPF IS 'CPF da pessoa física.';
COMMENT ON COLUMN CADASTRO.PESSOA.SEXO IS 'Gênero (Sexo) da pessoa física.';
COMMENT ON COLUMN CADASTRO.PESSOA.DATA_NASCIMENTO IS 'Data de nascimento da pessoa físical.';
COMMENT ON COLUMN CADASTRO.PESSOA.ENDERECO IS 'Endereço de residência da pessoa física.';
COMMENT ON COLUMN CADASTRO.PESSOA.UF IS 'Estado (UF) de residência da pessoa física.';
COMMENT ON COLUMN CADASTRO.PESSOA.CIDADE IS 'Cidade de residência da pessoa física.';
COMMENT ON COLUMN CADASTRO.PESSOA.PAIS IS 'País de residência da pessoa física.';
COMMENT ON COLUMN CADASTRO.PESSOA.CELULAR IS 'Número do Telefone celular da pessoa física.';
COMMENT ON COLUMN CADASTRO.PESSOA.EMAIL IS 'Email da pessoa física.';
COMMENT ON COLUMN CADASTRO.PESSOA.DATA_CRIACAO IS 'Data de criação da pessoa física.';
COMMENT ON COLUMN CADASTRO.PESSOA.DATA_ATUALIZACAO IS 'Data de atualização da pessoa física.';


CREATE TABLE IF NOT EXISTS CADASTRO.VEICULO (
  VEICULO_ID BIGINT NOT NULL GENERATED BY DEFAULT AS IDENTITY,
  DATA_CRIACAO TIMESTAMP NOT NULL DEFAULT NOW(),
  DATA_ATUALIZACAO TIMESTAMP NOT NULL DEFAULT NOW(),
  ATIVO BOOLEAN DEFAULT TRUE,
  CATEGORIA VARCHAR(10) NOT NULL,
  CHASSI VARCHAR(20) NOT NULL,
  PLACA VARCHAR(7) NOT NULL,
  MODELO VARCHAR(30) NOT NULL,
  COR VARCHAR(30) NOT NULL,
  ANO_FABRICACAO INT NOT NULL,
  ANO_MODELOO INT NOT NULL,
  MARCA_ID BIGINT NOT NULL,
  PROPRIETARIO_ID BIGINT NOT NULL,
  PESSOA_ID BIGINT NOT NULL,
  CONSTRAINT PK_VEICULO PRIMARY KEY (VEICULO_ID),
  CONSTRAINT FK_VEICULO_MARCA_ID 
  	FOREIGN KEY(MARCA_ID) 
  	REFERENCES CADASTRO.MARCA(MARCA_ID),
  CONSTRAINT FK_VEICULO_PROPRIETARIO_ID 
  	FOREIGN KEY(PROPRIETARIO_ID) 
  	REFERENCES CADASTRO.PROPRIETARIO(PROPRIETARIO_ID),
  CONSTRAINT FK_VEICULO_PESSOA_ID 
  	FOREIGN KEY(PESSOA_ID) 
  	REFERENCES CADASTRO.PESSOA(PESSOA_ID)
);
COMMENT ON TABLE CADASTRO.VEICULO IS 'Tabela responsável por armazenar dados do veículo.';
COMMENT ON COLUMN CADASTRO.VEICULO.VEICULO_ID IS 'Identificador único da tabela.';
COMMENT ON COLUMN CADASTRO.VEICULO.DATA_CRIACAO IS 'Data de criação do veículo.';
COMMENT ON COLUMN CADASTRO.VEICULO.DATA_ATUALIZACAO IS 'Data de atualização do veículo.';
COMMENT ON COLUMN CADASTRO.VEICULO.ATIVO IS 'Se o veículo está habilitado ou não';
COMMENT ON COLUMN CADASTRO.VEICULO.CATEGORIA IS 'Se refere as categorias disponiveis para utilização (carro, caminhão, ônibus ou moto)';
COMMENT ON COLUMN CADASTRO.VEICULO.CHASSI IS 'Número de chassi do veículo';
COMMENT ON COLUMN CADASTRO.VEICULO.PLACA IS 'Placa do veículo';
COMMENT ON COLUMN CADASTRO.VEICULO.MODELO IS 'MODELOo descritivo do veículo';
COMMENT ON COLUMN CADASTRO.VEICULO.MARCA_ID IS 'Identificador único de MARCA.';
COMMENT ON COLUMN CADASTRO.VEICULO.COR IS 'Cor descritivo do veículo';
COMMENT ON COLUMN CADASTRO.VEICULO.ANO_FABRICACAO IS 'Ano de fabricação do veículo';
COMMENT ON COLUMN CADASTRO.VEICULO.ANO_MODELOO IS 'Ano do MODELOo do veículo';
COMMENT ON COLUMN CADASTRO.VEICULO.PROPRIETARIO_ID IS 'Identificador único de PROPRIETARIO.';
COMMENT ON COLUMN CADASTRO.VEICULO.PESSOA_ID IS 'Identificador único de PESSOA (Responsável).';


CREATE TABLE IF NOT EXISTS CADASTRO.VEICULO_MOTORISTA (
  VEICULO_ID BIGINT NOT NULL,
  PESSOA_ID BIGINT NOT NULL,
  CNH VARCHAR(50) NOT NULL UNIQUE,
  DATA_CRIACAO TIMESTAMP NOT NULL DEFAULT NOW(),
  DATA_ATUALIZACAO TIMESTAMP NOT NULL DEFAULT NOW(),
  ATIVO BOOLEAN DEFAULT TRUE,
  CONSTRAINT PK_VEICULO_MOTORISTA PRIMARY KEY (VEICULO_ID, PESSOA_ID),
  CONSTRAINT FK_VEICULO_MOTORISTA_PESSOA_ID 
  	FOREIGN KEY(PESSOA_ID) 
  	REFERENCES CADASTRO.PESSOA(PESSOA_ID)
);
COMMENT ON TABLE CADASTRO.VEICULO_MOTORISTA IS 'Tabela responsável por armazenar a relação entre veiculo e motorista.';
COMMENT ON COLUMN CADASTRO.VEICULO_MOTORISTA.VEICULO_ID IS 'Identificador único de VEICULO.';
COMMENT ON COLUMN CADASTRO.VEICULO_MOTORISTA.PESSOA_ID IS 'Identificador único de PESSOA.';
COMMENT ON COLUMN CADASTRO.VEICULO_MOTORISTA.CNH IS 'CNH do motorista.';
COMMENT ON COLUMN CADASTRO.VEICULO_MOTORISTA.DATA_CRIACAO IS 'Data de criação da relação entre veiculo e motorista.';
COMMENT ON COLUMN CADASTRO.VEICULO_MOTORISTA.DATA_ATUALIZACAO IS 'Data de atualização da relação entre veiculo e motorista.';
COMMENT ON COLUMN CADASTRO.VEICULO_MOTORISTA.ATIVO IS 'Se a relação entre veiculo e motorista está habilitada ou não';
